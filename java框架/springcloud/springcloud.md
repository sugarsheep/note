## 说明

## 目录

## 面试题

### springcloud与dubbo的区别

1. springcloud服务之间通过restful API进行通信，dubbo服务之间通过rpc进行通信

## 微服务概述

### 微服务是什么

> 微服务化的核心就是将传统的一站式应用，根据业务拆分成一个一个的服务，彻底
> 地去耦合,每一个微服务提供单个业务功能的服务，一个服务做一件事，
> 从技术角度看就是一种小而独立的处理过程，类似进程概念，能够自行单独启动
> 或销毁，拥有自己独立的数据库。

### 微服务与微服务架构

#### 微服务

> 强调的是服务的大小，它关注的是某一个点，是具体解决某一个问题/提供落地对应服务的一个服务应用,
> 狭意的看,可以看作Eclipse里面的一个个微服务工程/或者Module

#### 微服务架构

> **微服务架构**是⼀种架构模式，它提倡将单⼀应⽤程序划分成⼀组⼩的服务，服务之间互相协调、互相配合，为⽤户提供最终价值。每个服务运⾏在其**独⽴的进程中**，服务与服务间采⽤轻量级的通信机制互相协作（通常是基于HTTP协议的RESTful API）。每个服务都围绕着具体业务进⾏构建，并且能够被独⽴的部署到⽣产环境、类⽣产环境等。另外，**应当尽量避免统⼀的、集中式的服务管理机制**，对具体的⼀个服务⽽⾔，应根据业务上下⽂，选择合适的语⾔、⼯具对其进⾏构建。

### 微服务的优缺点

#### 优点

> - 每个服务足够内聚，足够小，代码容易理解这样能聚焦一个指定的业务功能或业务需求
>   开发简单、开发效率提高，一个服务可能就是专一的只干一件事。
> - 微服务能够被小团队单独开发，这个小团队是2到5人的开发人员组成。
> - 微服务是松耦合的，是有功能意义的服务，无论是在开发阶段或部署阶段都是独立的。
> - 微服务能使用不同的语言开发。
> - 易于和第三方集成，微服务允许容易且灵活的方式集成自动部署，通过持续集成工具，如Jenkins, Hudson, bamboo 。
> - 微服务易于被一个开发人员理解，修改和维护，这样小团队能够更关注自己的工作成果。无需通过合作才能体现价值。
> - 微服务允许你利用融合最新技术。
> - 微服务只是业务逻辑的代码，不会和HTML,CSS 或其他界面组件混合。
> - 每个微服务都有自己的存储能力，可以有自己的数据库。也可以有统一数据库。

#### 缺点

> - 开发人员要处理分布式系统的复杂性
> - 多服务运维难度，随着服务的增加，运维的压力也在增大
> - 系统部署依赖
> - 服务间通信成本
> - 数据一致性
> - 系统集成测试
> - 性能监控……

### 微服务技术栈

|               微服务条目               |                           落地技术                           | 备注 |
| :------------------------------------: | :----------------------------------------------------------: | :--: |
|                服务开发                |                Springboot、Spring、SpringMVC                 |      |
|             服务配置与管理             |            Netflix公司的Archaius、阿里的Diamond等            |      |
|             服务注册与发现             |                 Eureka、Consul、Zookeeper等                  |      |
|                服务调用                |                       Rest、RPC、gRPC                        |      |
|               服务熔断器               |                       Hystrix、Envoy等                       |      |
|                负载均衡                |                       Ribbon、Nginx等                        |      |
| 服务接口调用(客户端调用服务的简化工具) |                           Feign等                            |      |
|                消息队列                |                 Kafka、RabbitMQ、ActiveMQ等                  |      |
|            服务配置中心管理            |                  SpringCloudConfig、Chef等                   |      |
|          服务路由（API网关）           |                            Zuul等                            |      |
|                服务监控                |             Zabbix、Nagios、Metrics、Spectator等             |      |
|               全链路追踪               |                   Zipkin，Brave、Dapper等                    |      |
|                服务部署                |               Docker、OpenStack、Kubernetes等                |      |
|            数据流操作开发包            | SpringCloud Stream（封装与Redis,Rabbit、Kafka等发送接收消息） |      |
|              事件消息总线              |                       Spring Cloud Bus                       |      |

### 为什么选择SpringCloud作为微服务架构

#### 选型依据

> - 整体解决方案和框架成熟度
> - 社区热度
> - 可维护性
> - 学习曲线

#### 当前各大IT公司用的微服务架构有哪些?

> - 阿里Dubbo/HSF
> - 京东JSF
> - 新浪微博Motan
> - 当当网DubboX

#### 各微服务框架对比

![1568555092240](images/1568555092240.png)

## SpringCloud入门概述

### 是什么

#### 官网说明

![1568557637241](images/1568557637241.png)

> - SpringCloud，基于SpringBoot提供了一套微服务解决方案，包括服务注册与发现，配置中心，全链路监控，服务网关，负载均衡，熔断器等组件，除了基于NetFlix的开源组件做高度抽象封装之外，还有一些选型中立的开源组件。
> - SpringCloud利用SpringBoot的开发便利性巧妙地简化了分布式系统基础设施的开发，SpringCloud为开发人员提供了快速构建分布式系统的一些工具，包括配置管理、服务发现、断路器、路由、微代理、事件总线、全局锁、决策竞选、分布式会话等等,它们都可以用SpringBoot的开发风格做到一键启动和部署。
> - SpringBoot并没有重复制造轮子，它只是将目前各家公司开发的比较成熟、经得起实际考验的服务框架组合起来，通过SpringBoot风格进行再封装屏蔽掉了复杂的配置和实现原理，最终给开发者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包

#### 概括

> SpringCloud=分布式微服务架构下的一站式解决方案，是各个微服务架构落地技术的集合体，俗称微服务全家桶

#### SpringCloud和SpringBoot是什么关系

> - SpringBoot专注于快速方便的开发单个个体微服务。
> - SpringCloud是关注全局的微服务协调整理治理框架，它将SpringBoot开发的一个个单体微服务整合并管理起来，
> - 为各个微服务之间提供，配置管理、服务发现、断路器、路由、微代理、事件总线、全局锁、决策竞选、分布式会话等等集成服务
> - SpringBoot可以离开SpringCloud独立使用开发项目，但是SpringCloud离不开SpringBoot，属于依赖的关系.
> - SpringBoot专注于快速、方便的开发单个微服务个体，SpringCloud关注全局的服务治理框架。

#### Dubbo是怎么到SpringCloud的？哪些优缺点让你去技术选型

> - 目前成熟的互联网架构（分布式+服务治理Dubbo）
>
> ![1568557810949](images/1568557810949.png)
>
> - 我们把SpringCloud VS DUBBO进行一番对比
>
>   > 活跃度
>   >
>   > ```
>   > https://github.com/dubbo
>   > https://github.com/spring-cloud
>   > ```
>   >
>   > 对比结果
>   >
>   > ![1568558062948](images/1568558062948.png)
>   >
>   > - 最大区别：SpringCloud抛弃了Dubbo的RPC通信，采用的是基于HTTP的REST方式。
>   > - 严格来说，这两种方式各有优劣。虽然从一定程度上来说，后者牺牲了服务调用的性能，但也避免了上面提到的原生RPC带来的问题。而且REST相比RPC更为灵活，服务提供方和调用方的依赖只依靠一纸契约，不存在代码级别的强依赖，这在强调快速演化的微服务环境下，显得更加合适。
>   > - 品牌机与组装机的区别
>   >   很明显，Spring Cloud的功能比DUBBO更加强大，涵盖面更广，而且作为Spring的拳头项目，它也能够与Spring Framework、Spring Boot、Spring Data、Spring Batch等其他Spring项目完美融合，这些对于微服务而言是至关重要的。使用Dubbo构建的微服务架构就像组装电脑，各环节我们的选择自由度很高，但是最终结果很有可能因为一条内存质量不行就点不亮了，总是让人不怎么放心，但是如果你是一名高手，那这些都不是问题；而Spring Cloud就像品牌机，在Spring Source的整合下，做了大量的兼容性测试，保证了机器拥有更高的稳定性，但是如果要在使用非原装组件外的东西，就需要对其基础有足够的了解。
>   > - 社区支持与更新力度
>   >   最为重要的是，DUBBO停止了5年左右的更新，虽然2017.7重启了。对于技术发展的新需求，需要由开发者自行拓展升级（比如当当网弄出了DubboX），这对于很多想要采用微服务架构的中小软件组织，显然是不太合适的，中小公司没有这么强大的技术能力去修改Dubbo源码+周边的一整套解决方案，并不是每一个公司都有阿里的大牛+真实的线上生产环境测试过。
>
> - 总结Cloud与Dubbo
>
>   > 问题：
>   > 曾风靡国内的开源 RPC 服务框架 Dubbo 在重启维护后，令许多用户为之雀跃，但同时，也迎来了一些质疑的声音。互联网技术发展迅速，Dubbo 是否还能跟上时代？Dubbo 与 Spring Cloud 相比又有何优势和差异？是否会有相关举措保证 Dubbo 的后续更新频率？
>   >
>   > 人物：Dubbo重启维护开发的刘军，主要负责人之一
>   >
>   > 刘军，阿里巴巴中间件高级研发工程师，主导了 Dubbo 重启维护以后的几个发版计划，专注于高性能 RPC 框架和微服务相关领域。曾负责网易考拉 RPC 框架的研发及指导在内部使用，参与了服务治理平台、分布式跟踪系统、分布式一致性框架等从无到有的设计与开发过程。

#### 能干嘛